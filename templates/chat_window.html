<!DOCTYPE html>
<html>
<head>
    <title>Chat with {{ receiver.full_name }}</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.js"></script>
    <!-- <script>
        var socket = io.connect("http://127.0.0.1:5000");
    
        // Store user ID and receiver's name using Jinja
    var userId = {{ user.id|default(0)|tojson }};
    var receiverName = {{ receiver.full_name|default("")|tojson }};
    var receiverId = {{ receiver.id|default(0)|tojson }};


    
        socket.on("receive_message", function(data) {
            var chatBox = document.getElementById("chat-box");
    
            // Check if the sender is the logged-in user or the receiver
            var senderName = (data.sender_id == userId) ? "You" : receiverName;
    
            // Append message to chat box
            chatBox.innerHTML += "<p><b>" + senderName + ":</b> " + data.message + "</p>";
        });
    
        function sendMessage() {
            var messageInput = document.getElementById("message");
    
            // Emit message to server
            socket.emit("send_message", {
                receiver_id: receiverId,
                message: messageInput.value
            });
    
            // Clear input field after sending
            messageInput.value = "";
        }
    
    </script> -->
</head>
<body>
    <h2>Chat with {{ receiver.full_name }}</h2>
    <div id="chat-box">
        {% for msg in messages %}
            <p><b>{{ "You" if msg.sender_id == user.id else receiver.full_name }}:</b> {{ msg.message }}</p>
        {% endfor %}
    </div>
    <input type="text" id="message" placeholder="Type a message...">
    <button onclick="sendMessage()">Send</button>
</body>
</html>
